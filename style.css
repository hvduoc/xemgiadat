/* General Layout */
#map { 
    height: 100vh;
    width: 100vw; [cite_start]/* [cite: 3] */
}

/* Leaflet Customizations */
.leaflet-popup-content-wrapper { 
    border-radius: 8px; [cite_start]/* [cite: 4] */
}
.leaflet-control-layers-toggle {
    background-image: none !important; /* Xóa icon mặc định */
    width: 36px !important;
    height: 36px !important;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px !important;
}

/* Thêm icon mới bằng SVG */
.leaflet-control-layers-toggle::after {
    content: '';
    display: block;
    width: 20px;
    height: 20px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23333'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93s3.05-7.44 7-7.93v15.86zm2-15.86c1.03.13 2 .45 2.87.93L15.87 5c-1.03-.49-2.2-.76-3.47-.93v2.02zm0 4.04v3.94l3.54 3.54c.46-.77.82-1.62.9-2.54h-4.44zm0 5.96v2.02c1.27-.17 2.44-.44 3.47-.93l-1.47-1.47c-.87.48-1.84.8-2 .98z'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* Map Interaction Modes */
.map-add-mode { 
    cursor: crosshair !important; [cite_start]/* [cite: 6] */
}
.map-query-mode { 
    cursor: help !important; [cite_start]/* [cite: 7] */
}

/* Vertical Slider Styles */
input[type=range][orient=vertical] {
    writing-mode: bt-lr; [cite_start]/* [cite: 8] */
    -webkit-appearance: slider-vertical; [cite_start]/* [cite: 9] */
    width: 8px;
    height: 100px;
    padding: 0 5px; [cite_start]/* [cite: 10] */
}

/* Custom Marker Cluster Styles */
.marker-cluster-yellow {
    background-color: rgba(241, 211, 87, 0.6) !important; [cite_start]/* [cite: 11] */
}
.marker-cluster-yellow div {
    background-color: rgba(240, 194, 12, 0.6) !important; [cite_start]/* [cite: 12] */
}

/* Cadastral Info Popup Styles */
.thong-tin-dia-chinh table {
    width: 100%; [cite_start]/* [cite: 13] */
    border-collapse: collapse; [cite_start]/* [cite: 13] */
}
.thong-tin-dia-chinh td {
    padding: 4px 0; [cite_start]/* [cite: 14] */
}
.thong-tin-dia-chinh td:first-child {
    padding-right: 10px; [cite_start]/* [cite: 15] */
    white-space: nowrap; [cite_start]/* [cite: 16] */
}
.thong-tin-dia-chinh .actions {
    display: flex; [cite_start]/* [cite: 17] */
    justify-content: space-around; [cite_start]/* [cite: 17] */
    align-items: center;
    padding-top: 5px;
}
.thong-tin-dia-chinh .actions button {
    background: none; [cite_start]/* [cite: 18] */
    border: none; [cite_start]/* [cite: 18] */
    cursor: pointer;
    font-size: 18px;
    color: #555;
    transition: color 0.2s; [cite_start]/* [cite: 19] */
}
.thong-tin-dia-chinh .actions button:hover {
    color: #000; [cite_start]/* [cite: 20] */
}
/* --- CSS TỐI ƯU CHO THANH TRƯỢT DỌC --- */

/* 1. Khung trắng chứa thanh trượt */
#opacity-control {
    /* Thuộc tính vị trí mới */
    position: absolute;
    bottom: 80px;     /* Khoảng cách từ cạnh dưới */
    right: 18px;    /* Khoảng cách từ cạnh phải (tương đương right-4 của Tailwind) */
    z-index: 1000;
    width: 15px;      /* Giảm chiều rộng khung */
    height: 100px;    /* Giảm chiều cao khung */
    display: flex;
    justify-content: center;
    align-items: center;
}

/* 2. Chính thanh trượt */
#opacity-slider {
    -webkit-appearance: slider-vertical;
    writing-mode: bt-lr;
    width: 8px;       /* Giữ nguyên độ dày */
    height: 90px;    /* Giảm chiều dài thanh trượt */
    background: #e2e8f0;
    border-radius: 2px;
    outline: none;
}

/* 3. Nút kéo (thumb) trên Chrome, Safari, Edge */
#opacity-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;      /* Giảm kích thước nút kéo */
  height: 20px;     /* Giảm kích thước nút kéo */
  background: #3b82f6;
  cursor: pointer;
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 0 2px rgba(0,0,0,0.5); /* Thêm đổ bóng nhẹ cho nổi bật */
}

/* 4. Nút kéo (thumb) trên Firefox */
#opacity-slider::-moz-range-thumb {
  width: 20px;      /* Giảm kích thước nút kéo */
  height: 20px;     /* Giảm kích thước nút kéo */
  background: #3b82f6;
  cursor: pointer;
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 0 2px rgba(0,0,0,0.5);
}

/* --- CSS CHO KHUNG KẾT QUẢ TÌM KIẾM --- */
#search-results .result-category {
    padding: 10px 15px;
    font-size: 0.9rem;
    font-weight: bold;
    color: #6b7280; /* text-gray-500 */
    background-color: #f9fafb; /* bg-gray-50 */
    border-bottom: 1px solid #e5e7eb; /* border-gray-200 */
}

#search-results .result-item {
    padding: 12px 15px;
    cursor: pointer;
    border-bottom: 1px solid #f3f4f6; /* border-gray-100 */
    display: flex;
    align-items: center;
}

#search-results .result-item:hover {
    background-color: #eff6ff; /* bg-blue-50 */
}

#search-results .result-item .icon {
    margin-right: 12px;
    color: #9ca3af; /* text-gray-400 */
}

#search-results .result-item .price {
    font-weight: 600;
    color: #dc2626; /* text-red-600 */
    font-size: 0.9rem;
    margin-left: 8px;
}
/* --- CSS CHO NHÃN KÍCH THƯỚC TRÊN BẢN ĐỒ --- */
.dimension-label {
    background: rgba(255, 255, 255, 0.8);
    border-radius: 4px;
    padding: 2px 5px;
    font-size: 12px;
    font-weight: bold;
    color: #333;
    white-space: nowrap;
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    border: 1px solid rgba(0,0,0,0.2);
}
/* --- CSS CHO BOTTOM SHEET PANEL --- */
/* --- CSS CHO BOTTOM SHEET PANEL (ĐÃ TỐI ƯU) --- */

#info-panel {
    transition: transform 0.3s ease-in-out, height 0.3s ease-in-out;
}

#info-panel.is-open {
    transform: translateY(0);
}

/* Trạng thái thu gọn */
#info-panel.is-collapsed {
    height: 65px !important; 
    overflow-y: hidden;
}
#info-panel.is-collapsed #panel-content {
    display: none;
}

/* Các nút điều khiển trên Header */
.panel-header-btn {
    padding: 0.25rem 0.5rem;
    color: #6b7280;
    transition: color 0.2s;
}
.panel-header-btn:hover {
    color: #111827;
}

/* Các dòng thông tin - Bố cục 1 hàng */
#panel-content .info-row {
    display: flex;
    justify-content: center; /* Căn giữa cho đẹp */
    flex-wrap: wrap; /* Cho phép xuống dòng trên màn hình quá nhỏ */
    padding: 4px 0;
    text-align: center;
    font-size: 14px;
}
#panel-content .info-group {
    flex-basis: 50%;
}
#panel-content .info-label {
    color: #6b7280;
    margin-right: 8px;
}
#panel-content .info-value {
    font-weight: 600;
    color: #1f2937;
}

/* Các nút Action (Thích, Sao chép, Chia sẻ) */
#panel-actions {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #e5e7eb;
}
#panel-actions button {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 8px;
    border-radius: 8px;
    transition: background-color 0.2s;
    background-color: #f9fafb;
    border: 1px solid #e5e7eb;
}
#panel-actions button:hover {
    background-color: #f3f4f6;
}
#panel-actions .icon {
    font-size: 20px;
    margin-bottom: 4px;
}
#panel-actions .text {
    font-size: 12px;
    font-weight: 500;
}
/* --- CSS CHO THANH CÔNG CỤ MỚI --- */
.toolbar-btn {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    border-radius: 9999px; /* rounded-full */
    font-size: 14px;
    font-weight: 500;
    color: #374151; /* text-gray-700 */
    transition: background-color 0.2s, color 0.2s;
}

.toolbar-btn i {
    margin-right: 6px;
    font-size: 16px;
}

.toolbar-btn:hover {
    background-color: #f3f4f6; /* bg-gray-100 */
}

.toolbar-btn.active-tool {
    background-color: #3b82f6; /* bg-blue-600 */
    color: white;
}
/* Thêm vào để tạo hiệu ứng di chuyển mượt mà */
#action-toolbar {
    transition: transform 0.3s ease-in-out;
}

/* Đây là trạng thái "được nâng lên" của thanh công cụ */
#action-toolbar.is-raised {
    /* Dịch chuyển lên trên 75px */
    transform: translate(-50%, -75px);
}

/* Lớp CSS cho nút đang được kích hoạt */